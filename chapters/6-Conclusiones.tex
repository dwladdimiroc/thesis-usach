\chapter{Conclusiones}
\label{cap:conclusiones}
En este trabajo se ha propuesto la generación de un sistema elástico, cuyo objetivo es lograr una mejor utilización de los recursos disponibles \hl{en un sistema} y con ello un aumento en su capacidad de procesamiento y escalabilidad.

\section{Detalles de la contribución}
Dentro de las contribuciones de este trabajo se encuentra el diseño e implementación de un modelo elástico que es capaz de lidiar con el dinamismo del flujo de eventos o tráfico de datos. En este modelo se diseñaron cuatro módulos, los cuales estaban compuestos por un módulo de monitoreo, que recolecta las estadísticas, un módulo reactivo y predictivo, que estima la carga de cada operador en el presente y a futuro respectivamente, y un módulo de administración de réplicas, que aumenta o disminuye el número de réplicas de un operador según la carga de éste.

El módulo reactivo que se ha diseñado e implementado tiene como función analizar la carga actual del operador, cumpliendo así el primer objetivo de este trabajo, el cual consiste en dise\~nar e implementar un algoritmo reactivo que permita analizar en el momento la carga de los operadores.

Por otra parte, se ha diseñado e implementando el módulo predictivo, cuya función es estimar la carga de un operador en una ventana de tiempo futura, cumpliendo el segundo objetivo, el cual consiste en dise\~nar e implementar un algoritmo de predicci\'on que permita estimar la carga de los operadores.

Así mismo, se ha diseñado e implementado un módulo de administración de réplicas, el cual se encarga de administrar la cantidad de réplicas de los operadores del SPS de forma elástica, vale decir, que aumenta o disminuye el número de réplicas acorde al tráfico recibido.

%Por otra parte, se han diseñado y construido distintos experimentos que permita validar la hipótesis planteada, cuyo planteamiento es la utilización de modelo elástico de tal manera que mejore el rendimiento del SPS y se procese mayor cantidad de eventos, cumpliendo así el cuarto objetivo planteado.

Para validar el modelo elástico se \hl{han} construido tres escenarios para la experimentación, donde el \hl{primero} consiste en una aplicación que realiza operaciones sin estados, la segunda una aplicación que realiza operaciones con estados, y la tercera una aplicación sintética. De esta manera, el objetivo es evaluar el rendimiento del sistema utilizando el modelo elástico.

%Y finalmente, se ha evaluado y analizado el rendimiento del sistema a través de distintas aplicaciones generadas sobre un SPS, en este caso sobre S4. En todas las aplicaciones ha mejorado la cantidad de eventos procesados, dependiendo del tipo de aplicación se ha detectado un aumento de hasta 8 veces más eventos procesados. Como se había mencionado anterior, al posee mayor cantidad de datos procesados, se posee mayor precisión en la información obtenida. Por otra parte, el costo asociado por la implementación del modelo elástico es de un aumento de $0,0119\%$, pero con una disminución del uso de la memoria RAM, la cual es de un $1,5187\%$, lo cual significa que el sistema si bien puede aumentar el consumo de CPU, disminuye el uso de la RAM.

Haciendo uso de los escenarios, se ha evaluado y analizado el rendimiento del sistema con y sin uso del modelo elástico. Los resultados muestran que para todos los escenarios se ha mejorado la cantidad de eventos procesados. Dependiendo del tipo de escenario, se ha detectado un aumento de hasta 9 veces en el \textit{throughput} de la aplicación. Este es un resultado importante, puesto que al poseer una mayor cantidad de datos procesados, se puede lograr una mayor precisión en la información obtenida. Por otra parte, el costo asociado a la implementación del modelo elástico en relación a la CPU es de un aumento del $0,01\%$, sin embargo la memoria RAM utilizada ha disminuido en un $1,51\%$.

%Por lo que no sólo se lograron todos los objetivos planteados, sino que se ha demostrado la hipótesis planteada en el inicio del trabajo, donde según los distintos experimentos realizados, se ha determinado que el modelo cumple con una mejora en el SPS, aumentando la cantidad de datos procesados. Pero además de esto, se ha concluido que el sistema posee un bajo costo de implementación, además de una ganancia en el consumo de memoria.

De esta manera, podemos ver que se han alcanzado todos los objetivos planteados, y la hipótesis establecida se ha validado. El modelo cumple con hacer elástico el SPS, aumentando la cantidad de datos procesos acorde al tráfico recibido. Además, se ha concluido que el sistema posee un bajo costo de implementación.

\section{Discusiones}

Uno de los problemas detectados en el desarrollo de este trabajo es la implementación realizada en S4, debido que el SPS posee ciertas falencias para la implementación del modelo diseñado. Esto se debe a que la cantidad de eventos entrantes no son todos procesados, independientemente si se genera una mayor cantidad de réplicas o no. Esto fue detectado en la fase de experimentación, donde al tratar de realizar pruebas con un tiempo de ejecución mayor, existe una disminución considerablemente de la tasa de rendimiento de un operador después de un largo tiempo de ejecución, debido a que el \textit{buffer} del operador se llena al no procesar todos los datos entrantes, bloqueando el envío de eventos a éste.

%Dentro de las limitaciones del trabajo está la homogeneidad de la tasa de procesamiento. Como se había presentando en las limitaciones, este modelo asume una tasa de procesamiento homogénea para cada uno de los eventos entrantes, la cual es obtenida, en general, en las primeras ventanas de tiempo de la ejecución. Esto es importante de considerar, porque de ser heterogéneos los eventos entrantes, se calculan tasas de procesamientos las cuales no garantizan que los próximos eventos posean la misma tasa de procesamiento. Puede darse el caso que su tasa de procesamiento sea más alta o más baja, por lo que el cálculo de la tasa de rendimiento es erróneo, generando una mala estimación de la carga del operador.

Dentro de las limitaciones del trabajo está \hl{el cálculo de la tasa de procesamiento, la cual se considera homogénea en todo en transcurso de la ejecución del sistema. Esto significa que se calcula un valor al principio de la ejecución del sistema, el cual indica cual es la cantidad de eventos que procesa por segundo, de tal manera de considerar esa tasa de procesamiento en los cálculos de la tasa de rendimiento de los operadores. En caso que no se considere esto, se tiene que calcular una tasa de procesamiento en ventanas de tiempo, lo cual puede producir un porcentaje de error, debido que la tasa de procesamiento de la ventana de tiempo anterior no sea la misma que la actual.}

Si bien el modelo diseñado realiza un análisis del sistema lógico, no considera un análisis de los recursos físicos disponibles por parte del sistema, es decir, uso de la CPU, capacidad de la memoria RAM, entre otras métricas. Cabe destacar, que en el caso que la carga de un operador aumente en conjunto con la replicación, existe la limitación física de la máquina, debido a la capacidad de la CPU y memoria que éste posea, limitando la capacidad de procesamiento del SPS.

Por otra parte, el sistema no es capaz de detectar patrones estacionarios que puedan existir en el día, lo cual es una desventaja en la implementación de éste. Esto se debe a que el algoritmo predictivo analiza procesos estocásticos, y no un aprendizaje del comportamiento del flujo de datos, como lo realizan así modelos predictivos tipo \textit{machine learning} \citep{bookMohri2012}. Sin embargo, estas soluciones son de alto costo y limitan la escalabilidad del SPS.

Finalmente, el sistema diseñado presenta como ventaja poseer un bajo cómputo para el cálculo del número de réplicas. También se destaca el rápido análisis de los operadores, ya sea en la distribución de carga en cada uno de los operadores, o en el estado que se encuentra el operador, de tal manera de modificar la cantidad de réplicas existentes. De esta manera, al poseer un sistema elástico, se logra optimizar el uso de los recursos existentes y adquirir un dinamismo en el grafo de la aplicación ejecutada sobre el SPS.

\section{Trabajo futuro}
%Dentro de las mejoras que se puede realizar al sistema son fundamental tres: un modelo elástico que trabaje con más de un nodo físico, un predictor que indique dinámicamente cuantas son las réplicas necesarias según el historial y la implementación del sistema diseñado en otro SPS.

Dentro de los problemas abiertos que pueden resolverse a futuro en el modelo propuesto, se encuentran: el diseño de un predictor que indique dinámicamente cuántas son las réplicas necesarias según el historial y la implementación del modelo diseñado en otro SPS.

%En el primer caso, se podría realizar un sistema de monitoreo, en el cual se posea una máquina para analizar los datos de cada una de las máquinas disponibles, y ésta posea además las réplicas primarias de cada operador. En caso que exista una sobrecarga por parte de un operador, es necesario realizar una réplica por parte del monitor centralizado, y que este determine a cual de las máquinas disponibles debe enviar los datos según la cantidad de recursos disponibles, tasa de procesamiento por parte del operador, entre otras variables. De esta manera, se posee un sistema escalable, debido que se puede implementar un SPS en un servicio de \textit{Cloud Computing}, de tal manera que en caso que sea necesario mayor cantidad de máquinas, se añadan y el monitor pueda distribuir mayor carga a estas nuevas máquinas, en caso de ser requerido.

Actualmente el modelo propuesto asume de manera estática un número fijo de réplicas a generar, se podría realizar un análisis más detallado de la historia, de tal manera que según el comportamiento que éste posea, estimar cuantas serían las réplicas a aumentar o disminuir. Así mismo, se podría realizar un estudio respecto a los \textit{peak} de tráfico que se encuentren de forma estacionaria según cierto flujo de datos, y que el sistema se adapte dinámicamente a estos. Para realizar estos estudios, se puede añadir la capacidad de aprendizaje utilizando \textit{machine learning} \citep{bookMohri2012} al modelo propuesto. De esta manera, éste aprendería los comportamientos respectivos del tráfico, de manera de mejorar la predicción y con ello la utilización de recursos.

%Por ejemplo, en el caso de \textit{Twitter} existen períodos del día que los usuarios comentan más, por lo tanto, en esos períodos aumentar la cantidad de recursos, y en los períodos que no comentan tanto, se podría disminuir la cantidad de recursos, por lo que se podría evaluar alternativas para el predictor como \textit{machine learning} \citep{bookMohri2012}.

Por otra parte, sería interesante poder implementar el modelo elástico en otro SPS, ya sea Storm \citep{stormtwitter} o StreamIt \citep{ThiesKA02}, debido a los distintos problemas que surgieron al utilizar el S4. De esta manera, se podría realizar una comparación de cual son los distintos pro y contra de los SPS con el sistema implementando, y en que casos es mejor utilizar uno u otro dependiendo del modelo o escenario que estos utilicen.